<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Email Verification Tool</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .container {
            background: white;
            border-radius: 20px;
            padding: 30px 20px;
            max-width: 400px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        h1 {
            text-align: center;
            color: #667eea;
            margin-bottom: 30px;
            font-size: 24px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 500;
            font-size: 14px;
        }

        .input-wrapper {
            display: flex;
            gap: 10px;
        }

        input {
            flex: 1;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 14px;
            transition: all 0.3s;
            cursor: pointer;
        }

        input:focus {
            outline: none;
            border-color: #667eea;
        }

        input:read-only {
            background: #f5f5f5;
        }

        button {
            padding: 12px 20px;
            border: none;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .btn-generate {
            background: #667eea;
            color: white;
        }

        .btn-generate:hover {
            background: #5568d3;
            transform: translateY(-2px);
        }

        .btn-get-code {
            background: #48bb78;
            color: white;
        }

        .btn-get-code:hover {
            background: #38a169;
            transform: translateY(-2px);
        }

        .btn-submit {
            width: 100%;
            background: #f56565;
            color: white;
            padding: 15px;
            font-size: 16px;
            margin-top: 10px;
        }

        .btn-submit:hover {
            background: #e53e3e;
            transform: translateY(-2px);
        }

        .btn-submit:disabled {
            background: #cbd5e0;
            cursor: not-allowed;
            transform: none;
        }

        .status {
            padding: 10px 15px;
            border-radius: 10px;
            margin-top: 15px;
            font-size: 13px;
            display: none;
        }

        .status.success {
            background: #c6f6d5;
            color: #22543d;
            display: block;
        }

        .status.error {
            background: #fed7d7;
            color: #742a2a;
            display: block;
        }

        .status.info {
            background: #bee3f8;
            color: #2c5282;
            display: block;
        }

        .loading {
            display: inline-block;
            width: 14px;
            height: 14px;
            border: 2px solid #f3f3f3;
            border-top: 2px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 8px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìß Email Verification</h1>
        
        <div class="input-group">
            <label>Email g·ªëc</label>
            <div class="input-wrapper">
                <input type="text" id="emailInput" readonly placeholder="ƒê·ªÉ tr·ªëng s·∫Ω t·ª± t·∫°o email">
                <button class="btn-generate" onclick="generateEmail()">Generate</button>
            </div>
        </div>

        <div class="input-group">
            <label>Username (kh√¥ng c√≥ @gmail.com)</label>
            <input type="text" id="usernameInput" readonly placeholder="Username s·∫Ω ƒë∆∞·ª£c t·∫°o t·ª± ƒë·ªông">
        </div>

        <div class="input-group">
            <label>Password</label>
            <div class="input-wrapper">
                <input type="text" id="passwordInput" readonly placeholder="Nh·∫≠p password ho·∫∑c Generate">
                <button class="btn-generate" onclick="generatePassword()">Generate</button>
            </div>
        </div>

        <div class="input-group">
            <label>S·ªë ƒëi·ªán tho·∫°i</label>
            <div class="input-wrapper">
                <input type="text" id="phoneInput" readonly placeholder="S·ªë s·∫Ω ƒë∆∞·ª£c t·∫°o t·ª± ƒë·ªông">
                <button class="btn-generate" onclick="getOTP()">Get OTP</button>
            </div>
        </div>

        <div class="input-group">
            <label>SMS Code</label>
            <div class="input-wrapper">
                <input type="text" id="smsCodeInput" readonly placeholder="Code SMS s·∫Ω ƒë∆∞·ª£c l·∫•y t·ª± ƒë·ªông">
                <button class="btn-get-code" onclick="checkSMS()">Check SMS</button>
            </div>
        </div>

        <div class="input-group">
            <label>Email kh√¥i ph·ª•c (mailkp)</label>
            <div class="input-wrapper">
                <input type="text" id="mailkpInput" readonly placeholder="Email s·∫Ω ƒë∆∞·ª£c t·∫°o t·ª± ƒë·ªông">
                <button class="btn-get-code" onclick="getCode()">Get Code</button>
            </div>
        </div>

        <div class="input-group">
            <label>Verification Code</label>
            <input type="text" id="codeInput" readonly placeholder="Code s·∫Ω ƒë∆∞·ª£c l·∫•y t·ª± ƒë·ªông">
        </div>

        <button class="btn-submit" onclick="submitData()">Submit</button>

        <div id="status" class="status"></div>
    </div>

    <script>
        let currentOrderId = null; // L∆∞u order ID khi get OTP
        
        // Auto copy khi click v√†o input c√≥ d·ªØ li·ªáu
        document.querySelectorAll('input').forEach(input => {
            input.addEventListener('click', function() {
                if (this.value) {
                    this.select();
                    document.execCommand('copy');
                    showStatus('ƒê√£ copy: ' + this.value, 'success');
                }
            });
        });

        function generateRandomString(length) {
            const chars = 'abcdefghijklmnopqrstuvwxyz0123456789';
            let result = '';
            for (let i = 0; i < length; i++) {
                result += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return result;
        }

        function generateRandomName() {
            const firstNames = ['nguyen', 'tran', 'le', 'pham', 'hoang', 'vo', 'dang', 'bui', 'duong', 'ngo', 'ly', 'vuong', 'trinh', 'dao', 'mai', 'ta', 'ha'];
            const middleNames = ['van', 'thi', 'duc', 'minh', 'hoang', 'kim', 'thanh', 'quoc', 'anh', 'tuan', 'hong', 'huong', 'duy', 'thang', 'hai', 'long'];
            const lastNames = ['hung', 'linh', 'hoa', 'lan', 'son', 'nga', 'thu', 'binh', 'phuong', 'hieu', 'khoa', 'phong', 'dung', 'quan'];
            const suffixes = ['dj', 'pro', 'vip', 'official', 'real', 'kp', 'bat', 'dev', 'main', 'acc', 'haka', 'kaxi', 'boss', 'king', 'tech', 'cute', 'love'];
            
            const firstName = firstNames[Math.floor(Math.random() * firstNames.length)];
            const middleName = middleNames[Math.floor(Math.random() * middleNames.length)];
            const lastName = lastNames[Math.floor(Math.random() * lastNames.length)];
            const suffix = suffixes[Math.floor(Math.random() * suffixes.length)];
            const randomNum = Math.floor(Math.random() * 90000) + 10000; // 5 ch·ªØ s·ªë: 10000-99999
            
            // Random format - t·∫•t c·∫£ ƒë·ªÅu d√†i
            const formats = [
                `${firstName}${middleName}${lastName}.${suffix}${randomNum}`,
                `${lastName}${firstName}${middleName}.${suffix}${randomNum}`,
                `${firstName}${lastName}${middleName}${suffix}${randomNum}`,
                `${middleName}${firstName}${lastName}.${suffix}${randomNum}`,
                `${firstName}.${middleName}${lastName}${suffix}${randomNum}`
            ];
            
            return formats[Math.floor(Math.random() * formats.length)];
        }

        function generateRandomPassword() {
            const chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';
            const numbers = '0123456789';
            const specials = '@$%&!#';
            
            let password = '';
            const length = 10 + Math.floor(Math.random() * 5); // 10-14 k√Ω t·ª±
            
            // ƒê·∫£m b·∫£o c√≥ √≠t nh·∫•t 1 ch·ªØ hoa, 1 ch·ªØ th∆∞·ªùng, 1 s·ªë, 1 k√Ω t·ª± ƒë·∫∑c bi·ªát
            password += chars.charAt(Math.floor(Math.random() * 26)); // Ch·ªØ th∆∞·ªùng
            password += chars.charAt(26 + Math.floor(Math.random() * 26)); // Ch·ªØ hoa
            password += numbers.charAt(Math.floor(Math.random() * numbers.length));
            password += specials.charAt(Math.floor(Math.random() * specials.length));
            
            // Th√™m c√°c k√Ω t·ª± ng·∫´u nhi√™n c√≤n l·∫°i
            const allChars = chars + numbers + specials;
            for (let i = password.length; i < length; i++) {
                password += allChars.charAt(Math.floor(Math.random() * allChars.length));
            }
            
            // Shuffle password
            password = password.split('').sort(() => Math.random() - 0.5).join('');
            
            return password;
        }

        function generatePassword() {
            const password = generateRandomPassword();
            document.getElementById('passwordInput').value = password;
            showStatus('‚úÖ ƒê√£ t·∫°o password: ' + password, 'success');
        }

        async function getOTP() {
            showStatus('ƒêang thu√™ s·ªë ƒëi·ªán tho·∫°i...', 'info');

            try {
                const response = await fetch('https://gmailios.vn/api/order-sms/5/xsh9TXWCusAR83zcRptZEuls6ocp9j/viettel', {
                    method: 'GET',
                    headers: {
                        'Accept': 'application/json'
                    }
                });

                const result = await response.json();
                
                if (result.status === 'success') {
                    const phoneNumber = result.data.phone_number;
                    currentOrderId = result.data.id; // L∆∞u ID ƒë·ªÉ check SMS sau
                    
                    document.getElementById('phoneInput').value = phoneNumber;
                    showStatus(`‚úÖ ƒê√£ thu√™ s·ªë: ${phoneNumber}`, 'success');
                } else {
                    showStatus('‚ùå Kh√¥ng th·ªÉ thu√™ s·ªë ƒëi·ªán tho·∫°i', 'error');
                }
            } catch (error) {
                showStatus('‚ùå L·ªói khi thu√™ s·ªë: ' + error.message, 'error');
            }
        }

        async function checkSMS() {
            if (!currentOrderId) {
                showStatus('Vui l√≤ng Get OTP tr∆∞·ªõc', 'error');
                return;
            }

            showStatus('ƒêang ki·ªÉm tra SMS...', 'info');

            try {
                const response = await fetch(`https://gmailios.vn/api/check-order/${currentOrderId}`, {
                    method: 'GET',
                    headers: {
                        'Accept': 'application/json'
                    }
                });

                const result = await response.json();
                
                if (result.status === 'success') {
                    const codeOtp = result.data.code_otp;
                    
                    if (codeOtp && codeOtp !== '') {
                        document.getElementById('smsCodeInput').value = codeOtp;
                        showStatus(`‚úÖ ƒê√£ nh·∫≠n ƒë∆∞·ª£c SMS Code: ${codeOtp}`, 'success');
                    } else {
                        showStatus('‚ö†Ô∏è Ch∆∞a nh·∫≠n ƒë∆∞·ª£c SMS. Th·ª≠ l·∫°i sau...', 'error');
                    }
                } else {
                    showStatus('‚ùå Kh√¥ng th·ªÉ ki·ªÉm tra SMS', 'error');
                }
            } catch (error) {
                showStatus('‚ùå L·ªói khi check SMS: ' + error.message, 'error');
            }
        }

        async function generateEmail() {
            let emailInput = document.getElementById('emailInput').value;
            
            // N·∫øu ch∆∞a c√≥ email ho·∫∑c kh√¥ng ph·∫£i @gmail.com th√¨ t·ª± ƒë·ªông t·∫°o
            if (!emailInput || !emailInput.includes('@gmail.com')) {
                // T·∫°o username ng·∫´u nhi√™n
                const randomUsername = generateRandomName();
                emailInput = randomUsername + '@gmail.com';
                document.getElementById('emailInput').value = emailInput;
            }

            // L·∫•y ph·∫ßn tr∆∞·ªõc @gmail.com
            const username = emailInput.split('@gmail.com')[0];
            
            // ƒêi·ªÅn v√†o input username
            document.getElementById('usernameInput').value = username;
            
            // T·∫°o random 6 k√Ω t·ª±
            const randomStr = generateRandomString(6);
            
            // T·∫°o email m·ªõi
            const newEmail = `${username}${randomStr}@blondmail.com`;
            document.getElementById('mailkpInput').value = newEmail;

            showStatus('ƒêang t·∫°o inbox...', 'info');

            // G·ªçi API t·∫°o inbox
            try {
                const response = await fetch(`https://inboxes-com.p.rapidapi.com/inboxes/${newEmail}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'x-rapidapi-host': 'inboxes-com.p.rapidapi.com',
                        'x-rapidapi-key': '99ce4b7878msh6d53a5bae8037f0p112929jsn2dbaedf1cb0e'
                    },
                    body: JSON.stringify({})
                });

                const data = await response.json();
                
                if (data.activated) {
                    showStatus(`‚úÖ Email ${newEmail} ƒë√£ ƒë∆∞·ª£c k√≠ch ho·∫°t!`, 'success');
                } else {
                    showStatus('‚ö†Ô∏è Kh√¥ng th·ªÉ k√≠ch ho·∫°t email', 'error');
                }
            } catch (error) {
                showStatus('‚ùå L·ªói khi t·∫°o inbox: ' + error.message, 'error');
            }
        }

        async function getCode() {
            const mailkp = document.getElementById('mailkpInput').value;
            
            if (!mailkp) {
                showStatus('Vui l√≤ng t·∫°o email kh√¥i ph·ª•c tr∆∞·ªõc', 'error');
                return;
            }

            showStatus('ƒêang l·∫•y code...', 'info');

            try {
                const response = await fetch(`https://inboxes-com.p.rapidapi.com/inboxes/${mailkp}`, {
                    method: 'GET',
                    headers: {
                        'x-rapidapi-host': 'inboxes-com.p.rapidapi.com',
                        'x-rapidapi-key': '99ce4b7878msh6d53a5bae8037f0p112929jsn2dbaedf1cb0e'
                    }
                });

                const emails = await response.json();
                
                // T√¨m email t·ª´ Google v·ªõi verification code
                const googleEmail = emails.find(email => 
                    email.from.includes('noreply@google.com') && 
                    email.subject.includes('Email verification code')
                );

                if (googleEmail) {
                    // L·∫•y code t·ª´ subject (format: "Email verification code: 459371")
                    const code = googleEmail.subject.split(':')[1].trim();
                    document.getElementById('codeInput').value = code;
                    showStatus(`‚úÖ ƒê√£ l·∫•y code: ${code}`, 'success');
                } else {
                    showStatus('‚ö†Ô∏è Ch∆∞a nh·∫≠n ƒë∆∞·ª£c email verification. Th·ª≠ l·∫°i sau v√†i gi√¢y...', 'error');
                }
            } catch (error) {
                showStatus('‚ùå L·ªói khi l·∫•y code: ' + error.message, 'error');
            }
        }

        async function submitData() {
            const email = document.getElementById('emailInput').value;
            const password = document.getElementById('passwordInput').value;
            const recovery = document.getElementById('mailkpInput').value;

            if (!email || !password || !recovery) {
                showStatus('Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin', 'error');
                return;
            }

            showStatus('ƒêang submit...', 'info');

            try {
                const response = await fetch('https://script.google.com/macros/s/AKfycbytvG-tfmicCmWLLt6hBH5gh7D-k_zWLeQLZl2TQ1D7VDoDaFWMBVtzrl6gfekiXhr7/exec', {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        email: email,
                        password: password,
                        recovery: recovery
                    })
                });

                // V·ªõi no-cors, kh√¥ng th·ªÉ ƒë·ªçc response nh∆∞ng n·∫øu kh√¥ng c√≥ l·ªói nghƒ©a l√† ƒë√£ g·ª≠i th√†nh c√¥ng
                showStatus('‚úÖ Submit th√†nh c√¥ng!', 'success');
                
            } catch (error) {
                showStatus('‚ùå L·ªói khi submit: ' + error.message, 'error');
            }
        }

        function showStatus(message, type) {
            const statusDiv = document.getElementById('status');
            statusDiv.textContent = message;
            statusDiv.className = 'status ' + type;
        }
    </script>
</body>
</html>
